1概要
 片麻痺は、主に脳卒中や脳損傷が原因となって発症する障害で、一方の半身が麻痺することで運動障害や感覚障害を引き起こす。
 従って、発症すると日常動作が難しくなり、日常生活に深刻な影響を及ぼすことから、効果的なリハビリテーション方法の開発が期待されている。
 片麻痺のリハビリテーションの一手法として、ニューロフィードバック療法を用いたミラーセラピーが提案されている。
 ミラーセラピーは、麻痺していない側の手や足の運動を鏡を使用して模倣することで、脳の神経可塑性を活用し、運動機能の改善を試みる療法である。
 また、近年では、仮想現実（VR）技術をミラーセラピーに組み込むことで、より没入感のある環境を提供し、リハビリテーションの効果を向上させる可能性が示唆されている。
 実際に、既にVR技術を応用した高品質なサービスが提供されている。
 しかしながら、既存の手法には、高精度なモーションセンサーの設置に必要なスペースの制約や、微細な指の動きへの対応が難しいという問題点を抱えている。
 そこで本研究では、従来の手法における制約を解消するためのリハビリテーション方法の開発を目的とする。
 具体的には、スマートフォンのカメラで撮影した映像に対してOpenPose等の姿勢推定モデルを用いて全身の関節情報を取得する。
 加えて、ヘッドマウントディスプレイ（HMD）内蔵のハンドトラッカーから取得した手指の関節情報を組み合わせることにより、患者の実際の動作とVR空間内のアバタを同期させる手法を実現する。
 本報告では、主に姿勢推定モデルの実装と取得した座標情報からモーションデータの生成について報告する

2姿勢推定モデル
2-1概略
まず、実空間上の身体とVR空間上のアバタを同期させる手順について、図1に示す。
\\フローチャートを入れる
撮影した動画に姿勢推定モデルを利用することで、3次元関節座標を取得する。
座標情報だけでは動作データとして不十分なため、座標情報からフレームごとに各関節の回転角を計算する。
座標、回転角からblender及びunityを利用することで、モーション生成を行い、アバタに適応する。
この動作をHMDを通して、VR空間上で体感することで実現する

2-2OpenPose
OpenPoseいらんかも
Openposeの説明と実行結果
OpenPose[1]は深層学習を用いて、画像から人物の関節情報を検出する姿勢推定アルゴリズムである。
OpenPoseを実装し、出力した例を図2に示す。
\\実行画像
図2ではHMDを装着した場合、顔の座標情報が取得できていないことが分かる。
そこで、簡素な方法ではあるが、HMDに顔情報を書いた紙を貼り付けて推定させた結果を図3に示す。
\\実行画像
図3では顔の座標が検出できており、一部改善が見られた。
このことから、HMD装着時に置いても、顔の関節情報に関しては目印をつけ、認識させる手法が効果的であることが分かった。

2-3MediaPipe
MediaPipeの説明と実行結果
MediaPipe[2]もOpenPoseと同様に姿勢推定アルゴリズムである。
MediaPipeを実装し、出力した例を図4に示す。
\\実行結果
図4のようにMediaPipeにおいても人物の関節座標が取得できた。

現時点では適応の容易さから、MediaPipeでの実装を想定する。

3モーションデータの生成
MediaPipeのポーズ情報
MediaPipeでは図5のように関節座標が設定されている。
\\ポーズの画像
取得した三次元座標情報を元に、各フレーム毎の回転角を算出する。
回転角の算出には以下のアルゴリズムを適応した。
\\アルゴリズム
三次元座標と回転角から動作情報(BVH)を出力する。

4モデル動作
動作情報からモーション生成を行う例として、3dposetracker[3]というアプリケーションを利用し、モーション生成を行った。
生成されたモーション情報をunity[4]上で用意した3D人物モデルに適応した例を図6に示す。
\\unityの画面
動作が速い場面において、一部不自然な挙動が見られたが、動作の確認ができた。


5まとめと今後の展望
姿勢推定モデルの実行結果から全身の3次元関節座標を取得した。
取得した座標情報から関節の回転角を計算し、動作情報を生成した。
また、動作確認として、既存のアプリケーションを利用することで実際に3D空間上でアバタが動作することを確認した。

今後は、生成した動作情報をモーションに変換することで、撮影した動画に対してアバタが動作することを確認する。
その後、VR空間上での具体的な実験手法とその評価について検討する予定である。

???
リアルタイム性の確保
実験方法と評価方法


参考文献
Openposeの論文
Zhe,CAO,et al. "OpenPose: realtime multi-person
                2D pose estimation using Part Affinity Fields. arXir preprint
                arXiv:1812.08008,2018"
MediaPipeの論文(ない？)
                "GOOGLE LLC,MediaPipe,
                <https://google.github.io/mediapipe"

